{% extends 'nav.html' %}
{% load static %}

{% block title %}Add model{% endblock %}

{% block content %}
<section class="section">
    <div>  <!-- Add new model -->
        <h2 class="title">Create a New Financial Model</h2>
        <form id="createFModelForm">
            <input type="hidden" name="user_id" value="{{ user.id }}">
            <label for="fmodel_name">Name:</label>
            <input type="text" id="fmodel_name" name="fmodel_name" required>
            <button type="button" onclick="submitFModelForm()">Create</button>
        </form>
    </div>

    <div> <!-- Add income -->
        <h2 class="title">Add Income</h2>
        <form id="createIncomeForm">
            <input type="hidden" name="user_id" value="{{ user.id }}">
            <label for="fmodel_name">Financial Model Name:</label>
            <input type="text" id="fmodel_name" name="fmodel_name" required>
            <label for="income_name">Income Name:</label>
            <input type="text" id="income_name" name="income_name" required>
            <label for="value">Value:</label>
            <input type="number" step="0.01" id="value" name="value" required>
            <button type="button" onclick="submitIncomeForm()">Add Income</button>
        </form>
    </div>

    <div> <!-- Add expense -->
        <h2 class="title">Add Expenses</h2>
        <form id="createExpenseForm">
            {% csrf_token %}
            <input type="hidden" name="user_id" value="{{ user.id }}">
            <label for="fmodel_name_expense">Financial Model Name:</label>
            <input type="text" id="fmodel_name_expense" name="fmodel_name" required>
            
            <div id="expensesContainer">
                <div class="expense-entry">
                    <label for="expense_name_0">Expense Name:</label>
                    <input type="text" id="expense_name_0" name="expense_name" required>
                    <label for="expense_value_0">Amount:</label>
                    <input type="number" step="0.01" id="expense_value_0" name="value" required>
                </div>
            </div>
            
            <button type="button" onclick="addExpenseEntry()">Add Expense</button>
            <button type="button" onclick="submitExpenseForm()">Submit Expenses</button>
        </form>
    </div>

    <div>  <!-- Add asset -->
        <h2 class="title">Add Assets</h2>
        <form id="createAssetForm" method="post" action="{% url 'create_assets' %}">
            {% csrf_token %}
            <input type="hidden" name="user_id" value="{{ user.id }}">
            <label for="fmodel_name_asset">Financial Model Name:</label>
            <input type="text" id="fmodel_name_asset" name="fmodel_name" required>
            
            <div id="assetsContainer">
                <div class="asset-entry">
                    <label for="asset_name_0">Asset Name:</label>
                    <input type="text" id="asset_name_0" name="asset_name" required>
                    <label for="yield_rate_0">Yield Rate:</label>
                    <input type="number" step="0.01" id="yield_rate_0" name="yield_rate" required>
                    <label for="principle_amount_0">Principal Amount:</label>
                    <input type="number" step="0.01" id="principle_amount_0" name="principle_amount" required>
                </div>
            </div>
            
            <button type="button" onclick="addAssetEntry()">Add Asset</button>
            <button type="button" onclick="submitAssetForm()">Submit Assets</button>
        </form>
    </div>
</section>
{% endblock %}
{% block scripts %}
<script src="{% static 'personalfinance/form-handling.js' %}"></script>
{% endblock %}
